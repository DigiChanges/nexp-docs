"use strict";(self.webpackChunknexp_docs=self.webpackChunknexp_docs||[]).push([[9462],{3480:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var o=t(5893),a=t(1151);const s={},i="Exceptions",r={id:"documentation/exceptions",title:"Exceptions",description:"Exceptions play a very important role in a robust system.",source:"@site/docs/documentation/14-exceptions.md",sourceDirName:"documentation",slug:"/documentation/exceptions",permalink:"/docs/documentation/exceptions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:14,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"RequestID",permalink:"/docs/documentation/request-id"},next:{title:"Domains",permalink:"/docs/documentation/domains"}},c={},l=[];function d(e){const n={code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"exceptions",children:"Exceptions"}),"\n",(0,o.jsx)(n.p,{children:"Exceptions play a very important role in a robust system."}),"\n",(0,o.jsxs)(n.p,{children:["In Node Experience we take advantage of the HTTP library mechanism, to avoid having so many ",(0,o.jsx)(n.code,{children:"try catch"}),"s. Therefore we have a single place where we handle errors."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"\n/** src -> Shared -> Application -> AppKoa.ts **/\n\n// Generic error handling middleware.\nthis.app.use(ErrorKoaHandler.handle);\n\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"In this place we manage an exceptions factory, where we can understand what the error we get is and be able to handle it in the way that is most comfortable for us."}),"\n",(0,o.jsx)(n.p,{children:"Something to keep in mind is that conceptually speaking we have three large sets of exceptions."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["On the one hand we have the exceptions that are part of the libraries, such as ",(0,o.jsx)(n.code,{children:"Mongoose"}),", in this case we can catch the libraries of this style and return the information we need. For example:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"\n/** src -> Shared -> Presentation -> ExceptionFactory **/\n\n// ...\n\nif (err?.name === 'MongoServerError')\n{\n    if (err.code === 11000)\n    {\n        exception = new DuplicateEntityHttpException();\n    }\n}\n\n// ...\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"This way we can catch when we have a duplicate in the mongo database."}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"As in the previous code example we can see that we have an exception at the Http level. Http type exceptions are another set of exceptions."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Why do we differentiate them?"}),"\n",(0,o.jsx)(n.p,{children:"We differentiate them because the infrastructure layer such as Mongo, Redis, SQL, etc. They are not directly related to the Http layer, therefore we find ourselves with the situation that if the presentation layer is something other than Http, then the exception logic cannot be tied to an Http exception."}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Finally, we have the exceptions that are created within a specific domain, for example:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"\n/** src -> Auth -> Domain -> Exceptions -> BadCrenetialsException.ts **/\n\nclass BadCredentialsException extends ErrorException\n{\n    builder()\n    {\n        const locales = Locales.getInstance().getLocales();\n        const key = 'auth.domain.exceptions.badCredentials';\n        super({\n            message: locales.__(key),\n            errorCode: key\n        }, BadCredentialsException.name);\n    }\n}\n\n"})}),"\n",(0,o.jsx)(n.p,{children:"This type of exceptions are not subject to any type of library."})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>i});var o=t(7294);const a={},s=o.createContext(a);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);