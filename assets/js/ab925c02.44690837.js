"use strict";(self.webpackChunknexp_docs=self.webpackChunknexp_docs||[]).push([[1693],{8261:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var i=s(5893),t=s(1151);const r={},l="Package JSON",c={id:"documentation/package-json",title:"Package JSON",description:"Package Manager",source:"@site/docs/documentation/07-package-json.md",sourceDirName:"documentation",slug:"/documentation/package-json",permalink:"/docs/documentation/package-json",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tests",permalink:"/docs/documentation/test"},next:{title:"Makefile",permalink:"/docs/documentation/makefile"}},h={},d=[{value:"Package Manager",id:"package-manager",level:2},{value:"Script",id:"script",level:2},{value:"build",id:"build",level:3},{value:"command",id:"command",level:3},{value:"clean",id:"clean",level:3},{value:"cpy",id:"cpy",level:3},{value:"login",id:"login",level:3},{value:"pull",id:"pull",level:3},{value:"docker",id:"docker",level:3},{value:"lint",id:"lint",level:3},{value:"line",id:"line",level:3},{value:"pre",id:"pre",level:3},{value:"pre",id:"pre-1",level:3},{value:"prepare",id:"prepare",level:3},{value:"start",id:"start",level:3},{value:"test",id:"test",level:3},{value:"test",id:"test-1",level:3},{value:"test",id:"test-2",level:3},{value:"tsc",id:"tsc",level:3},{value:"ts",id:"ts",level:3},{value:"transpile",id:"transpile",level:3},{value:"sync",id:"sync",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"package-json",children:"Package JSON"}),"\n",(0,i.jsx)(n.h2,{id:"package-manager",children:"Package Manager"}),"\n",(0,i.jsxs)(n.p,{children:["Not too long ago we were using ",(0,i.jsx)(n.code,{children:"yarn"})," as a package manager."]}),"\n",(0,i.jsxs)(n.p,{children:["We very recently migrated to ",(0,i.jsx)(n.code,{children:"pnpm"})," the decision to switch is because ",(0,i.jsx)(n.code,{children:"pnpm"})," reduces the number of packages it downloads by making more efficient use of references therefore the final ",(0,i.jsx)(n.code,{children:"node_module"})," is smaller compared to ",(0,i.jsx)(n.code,{children:"npm"})," and ",(0,i.jsx)(n.code,{children:" yarn"}),". In addition, it seems that it has small moments where it installs the packages faster, especially when the cache exists."]}),"\n",(0,i.jsx)(n.h2,{id:"script",children:"Script"}),"\n",(0,i.jsxs)(n.p,{children:["We will be explaining each script that exists inside the ",(0,i.jsx)(n.code,{children:"package.json"})," file."]}),"\n",(0,i.jsx)(n.h3,{id:"build",children:"build"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"etsc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/evanw/esbuild",children:"esbuild"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/pradel/esbuild-node-externals",children:"esbuild-node-externals"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/a7ul/esbuild-node-tsc",children:" esbuild-node-tsc"})," and ",(0,i.jsx)(n.a,{href:"https://github.com/thomaschaaf/esbuild-plugin-tsc",children:"esbuild-plugin-tsc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is responsible for compiling the project written in Typescript."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"command",children:"command"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"ts-node src/command.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/tj/commander.js",children:"commander"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is used to execute NExp internal commands."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"###ci"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"npm run cpy-ci && npm run ts-check && npm run lint"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/eslint/eslint",children:"eslint"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/import-js/eslint-plugin-import",children:"eslint-plugin-import"})," , ",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint",children:"@typescript-eslint/eslint-plugin"}),", [@typescript-eslint/parser](",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/",children:"https://github.com/typescript-eslint/"})," typescript-eslint) and ",(0,i.jsx)(n.a,{href:"https://github.com/TristonJ/eslint-plugin-prefer-arrow",children:"eslint-plugin-prefer-arrow"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command is used in CircleCI, in a step that checks typing and linter."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"clean",children:"clean"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"rimraf dist/src/*"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"git://github.com/isaacs/rimraf",children:"rimraf"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command removes all files inside the compiled src folder."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"cpy",children:["cpy",":ci"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"cp .env.dev .env"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is in charge of copying basic environment variables to execute in CircleCI."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"###dev"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"nodemon"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/remy/nodemon",children:"nodemon"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": With this command we can execute the project in development mode."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"login",children:["login",":inphysical"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"inphysical login"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/Infisical/infisical-cli",children:"infisical"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": With this command you can log in to infisical."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"pull",children:["pull",":env"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"inphysical pull"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/Infisical/infisical-cli",children:"infisical"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command downloads the environment variables of the chosen workspace once you have logged in."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"docker",children:["docker",":command"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"docker-compose exec node pnpm command"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command executes the commands with ",(0,i.jsx)(n.code,{children:"command"})," but from the docker container ",(0,i.jsx)(n.code,{children:"node"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"lint",children:["lint",":fix"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"eslint -c .eslintrc.json ./src --fix"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/eslint/eslint",children:"eslint"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/import-js/eslint-plugin-import",children:"eslint-plugin-import"})," , ",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint",children:"@typescript-eslint/eslint-plugin"}),", [@typescript-eslint/parser](",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/",children:"https://github.com/typescript-eslint/"})," typescript-eslint) and ",(0,i.jsx)(n.a,{href:"https://github.com/TristonJ/eslint-plugin-prefer-arrow",children:"eslint-plugin-prefer-arrow"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command runs lint with the fix prefix to automatically fix all possible existing errors or warnings."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"line",children:"line"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"eslint -c .eslintrc.json ./src"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/eslint/eslint",children:"eslint"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/import-js/eslint-plugin-import",children:"eslint-plugin-import"})," , ",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/typescript-eslint",children:"@typescript-eslint/eslint-plugin"}),", [@typescript-eslint/parser](",(0,i.jsx)(n.a,{href:"https://github.com/typescript-eslint/",children:"https://github.com/typescript-eslint/"})," typescript-eslint) and ",(0,i.jsx)(n.a,{href:"https://github.com/TristonJ/eslint-plugin-prefer-arrow",children:"eslint-plugin-prefer-arrow"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command runs the linter to view errors and warnings."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"pre",children:["pre",":commit"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"lint-staged"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/okonet/lint-staged",children:"lint-staged"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is responsible for compiling the project written in Typescript."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"pre-1",children:["pre",":check"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"pnpm ts-check && pnpm lint"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command does a type and linter check."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"prepare",children:"prepare"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"husky install"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.code,{children:"husky"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command installs the necessary elements for husky to be functional in the project."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"start",children:"start"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"node dist/index.js"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command runs the compiled project in JS."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"test",children:["test",":ci"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"jest --run-in-band --coverage"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment-jsdom"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment- node"}),", and ",(0,i.jsx)(n.a,{href:"https://github.com/shelfio/jest-mongodb",children:"@shelf/jest-mongodb"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is in charge of testing the code."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"test-1",children:"test"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"jest --coverage"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment-jsdom"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment- node"}),", and ",(0,i.jsx)(n.a,{href:"https://github.com/shelfio/jest-mongodb",children:"@shelf/jest-mongodb"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is in charge of testing the code."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"test-2",children:["test",":watch"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"jest --watch --silent --coverage=false"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment-jsdom"}),", ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jest",children:"jest-environment- node"}),", and ",(0,i.jsx)(n.a,{href:"https://github.com/shelfio/jest-mongodb",children:"@shelf/jest-mongodb"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is responsible for compiling the project written in Typescript."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tsc",children:"tsc"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"tsc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/Microsoft/TypeScript",children:"typescript"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functionality"}),": This command is enabled to be used in conjunction for Typescript type checking."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"ts",children:["ts",":check"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"tsc -p tsconfig.json --noEmit"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/Microsoft/TypeScript",children:"typescript"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command checks the project types."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"transpile",children:"transpile"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"node build.js"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Packages"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/evanw/esbuild",children:"esbuild"})," and ",(0,i.jsx)(n.a,{href:"https://github.com/pradel/esbuild-node-externals",children:"esbuild-node-externals"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This allows you to transpile the project."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"sync",children:["sync",":db"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Representation"}),": ",(0,i.jsx)(n.code,{children:"ts-node src/Shared/Presentation/Commands/SynchronizeDb.ts"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Feature"}),": This command allows you to create the database tables when using MikroORM or TypeORM. The choice is made with the configuration default."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>l});var i=s(7294);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);